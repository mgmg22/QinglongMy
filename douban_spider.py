metroStations = [
    "èŽ˜åº„", "å¤–çŽ¯è·¯", "èŽ²èŠ±è·¯", "é”¦æ±Ÿä¹å›­",
    "ä¸Šæµ·å—ç«™", "æ¼•æºªè·¯", "å®œå±±è·¯", "å¾å®¶æ±‡", "è¡¡å±±è·¯", "å¸¸ç†Ÿè·¯",
    "é™•è¥¿å—è·¯", "é»„é™‚å—è·¯", "äººæ°‘å¹¿åœº", "æ–°é—¸è·¯", "æ±‰ä¸­è·¯", "ä¸Šæµ·ç«è½¦ç«™", "ä¸­å±±åŒ—è·¯", "å»¶é•¿è·¯", "ä¸Šæµ·é©¬æˆåŸŽ",
    "æ±¶æ°´è·¯", "å½­æµ¦æ–°æ‘", "å…±åº·è·¯", "é€šæ²³æ–°æ‘", "å‘¼å…°è·¯", "å…±å¯Œæ–°æ‘", "å®å®‰å…¬è·¯", "å‹è°Šè¥¿è·¯", "å¯Œé”¦è·¯",  # 1å·çº¿

    "æ·žè™¹è·¯", "åŒ—æ–°æ³¾", "å¨å®è·¯", "å¨„å±±å…³è·¯", "ä¸­å±±å…¬å›­", "æ±Ÿè‹è·¯", "é™å®‰å¯º", "å—äº¬è¥¿è·¯", "äººæ°‘å¹¿åœº", "å—äº¬ä¸œè·¯",
    "é™†å®¶å˜´", "ä¸œæ˜Œè·¯", "ä¸–çºªå¤§é“", "ä¸Šæµ·ç§‘æŠ€é¦†", "ä¸–çºªå…¬å›­", "é¾™é˜³è·¯", "å¼ æ±Ÿé«˜ç§‘", "é‡‘ç§‘è·¯", "å¹¿å…°è·¯", "å”é•‡",
    "åˆ›æ–°ä¸­è·¯", "åŽå¤ä¸œè·¯", "å·æ²™", "å‡Œç©ºè·¯", "è¿œä¸œå¤§é“", "æµ·å¤©ä¸‰è·¯", "æµ¦ä¸œå›½é™…æœºåœº",  # 2å·çº¿
    "ä¸Šæµ·å—ç«™", "çŸ³é¾™è·¯", "é¾™æ¼•è·¯", "æ¼•æºªè·¯", "å®œå±±è·¯", "è™¹æ¡¥è·¯", "å»¶å®‰è¥¿è·¯", "ä¸­å±±å…¬å›­", "é‡‘æ²™æ±Ÿè·¯", "æ›¹æ¨è·¯",
    "é•‡åªè·¯", "ä¸­æ½­è·¯", "ä¸Šæµ·ç«è½¦ç«™", "å®å±±è·¯", "ä¸œå®å…´è·¯", "è™¹å£è¶³çƒåœº", "èµ¤å³°è·¯", "å»¶å®‰å—è·¯", "æ±Ÿæ¹¾é•‡",
    "æ®·é«˜è¥¿è·¯", "é•¿æ±Ÿå—è·¯", "æ·žå‘è·¯", "å¼ åŽæµœ", "æ·žæ»¨è·¯",  # 3å·çº¿
    "å®œå±±è·¯", "è™¹æ¡¥è·¯", "å»¶å®‰è¥¿è·¯", "ä¸­å±±å…¬å›­", "é‡‘æ²™æ±Ÿè·¯", "æ›¹æ¨è·¯", "é•‡åªè·¯", "ä¸­æ½­è·¯", "ä¸Šæµ·ç«è½¦ç«™", "å®å±±è·¯",
    "æµ·ä¼¦è·¯", "ä¸´å¹³è·¯", "å¤§è¿žè·¯", "æ¨æ ‘æµ¦è·¯", "æµ¦ä¸œå¤§é“", "ä¸–çºªå¤§é“", "æµ¦ç”µè·¯", "è“æ‘è·¯", "å¡˜æ¡¥", "å—æµ¦å¤§æ¡¥",  # 4å·çº¿
    "èŽ˜åº„", "æ˜¥ç”³è·¯", "é“¶éƒ½è·¯", "é¢›æ¡¥", "åŒ—æ¡¥", "å‰‘å·è·¯", "ä¸œå·è·¯", "é‡‘å¹³è·¯", "åŽå®è·¯", "æ–‡äº•è·¯", "é—µè¡Œå¼€å‘åŒº",
    # 5å·çº¿
    "æ¸¯åŸŽè·¯", "å¤–é«˜æ¡¥ä¿ç¨ŽåŒºåŒ—", "èˆªæ´¥è·¯", "å¤–é«˜æ¡¥ä¿ç¨ŽåŒºå—", "æ´²æµ·è·¯", "äº”æ´²å¤§é“", "ä¸œé–è·¯", "å·¨å³°è·¯", "äº”èŽ²è·¯",
    "åšå…´è·¯", "é‡‘æ¡¥è·¯", "äº‘å±±è·¯", "å¾·å¹³è·¯", "åŒ—æ´‹æ³¾è·¯", "æ°‘ç”Ÿè·¯", "æºæ·±ä½“è‚²ä¸­å¿ƒ", "ä¸–çºªå¤§é“", "æµ¦ç”µè·¯",
    "å„¿ç«¥åŒ»å­¦ä¸­å¿ƒ", "ä¸´æ²‚æ–°æ‘", "é«˜ç§‘è¥¿è·¯", "ä¸œæ˜Žè·¯", "åŽå¤è¥¿è·¯", "ä¸Šå—è·¯", "çµå²©å—è·¯", "ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ",  # 6å·çº¿
    "èŠ±æœ¨è·¯", "é¾™é˜³è·¯", "èŠ³åŽè·¯", "æ¨é«˜å—è·¯", "é«˜ç§‘è¥¿è·¯", "è€€åŽè·¯", "äº‘å°è·¯", "æˆå±±è·¯", "ä¸œæ˜Žè·¯", "é«˜é’è·¯",
    "åŽå¤è¥¿è·¯", "æ¨æ€", "ä¸Šå—è·¯", "é«˜ç§‘è¥¿è·¯", "é•¿æ¸…è·¯", "åŽæ»©", "ä¸–åšå¤§é“", "äº‘è€€è·¯", "è€€åŽè·¯",  # 7å·çº¿
    "å¸‚å…‰è·¯", "å«©æ±Ÿè·¯", "ç¿”æ®·è·¯", "é»„å…´å…¬å›­", "å»¶å‰ä¸­è·¯", "é»„å…´è·¯", "æ±Ÿæµ¦è·¯", "éžå±±æ–°æ‘", "å››å¹³è·¯", "æ›²é˜³è·¯",
    "è™¹å£è¶³çƒåœº", "è¥¿è—åŒ—è·¯", "ä¸­å…´è·¯", "æ›²é˜œè·¯", "äººæ°‘å¹¿åœº", "å¤§ä¸–ç•Œ", "è€è¥¿é—¨", "é™†å®¶æµœè·¯", "è¥¿è—å—è·¯", "ä¸­åŽè·¯",
    "è€è¥¿é—¨", "é™†å®¶æµœè·¯", "è¥¿è—å—è·¯", "ä¸­åŽè·¯",  # 8å·çº¿
    "æ¼•æ²³æ³¾å¼€å‘åŒº", "åˆå·è·¯", "æ˜Ÿä¸­è·¯", "ä¸ƒå®", "ä¸­æ˜¥è·¯", "ä¹äº­", "æ³—æ³¾", "æ´žæ³¾", "æ¾æ±Ÿå¤§å­¦åŸŽ", "æ¾æ±Ÿæ–°åŸŽ",  # 9å·çº¿
    "è™¹æ¡¥ç«è½¦ç«™", "è™¹æ¡¥2å·èˆªç«™æ¥¼", "è™¹æ¡¥1å·èˆªç«™æ¥¼", "äº¤é€šå¤§å­¦", "ä¸Šæµ·å›¾ä¹¦é¦†", "é™•è¥¿å—è·¯", "æ–°å¤©åœ°", "è±«å›­",
    "å—äº¬ä¸œè·¯", "æµ·ä¼¦è·¯", "å››å·åŒ—è·¯", "å¤©æ½¼è·¯", "å››å·åŒ—è·¯", "é‚®ç”µæ–°æ‘", "å››å¹³è·¯", "åŒæµŽå¤§å­¦", "å›½æƒè·¯", "äº”è§’åœº",
    "æ±Ÿæ¹¾ä½“è‚²åœº", "æ–°æ±Ÿæ¹¾åŸŽ",  # 10å·çº¿
    "å˜‰å®šåŒ—", "å˜‰å®šæ–°åŸŽ", "ç™½é“¶è·¯", "ä¸Šæµ·æ±½è½¦åŸŽ", "å®‰äº­", "å…†ä¸°è·¯", "å…‰æ˜Žè·¯", "èŠ±æ¡¥",  # 11å·çº¿

    "é‡‘æµ·è·¯", "ç”³æ±Ÿè·¯", "é‡‘äº¬è·¯", "å·¨å³°è·¯", "æ¨é«˜åŒ—è·¯", "é‡‘æ¡¥è·¯", "æµ¦ä¸œè¶³çƒåœº", "ä¸œé™†è·¯", "éš†æ˜Œè·¯", "å®å›½è·¯",
    "æ±Ÿæµ¦å…¬å›­", "å¤§è¿žè·¯",
    "æç¯®æ¡¥", "å›½é™…å®¢è¿ä¸­å¿ƒ", "æµ·ä¼¦è·¯", "å¤©æ½¼è·¯", "å—äº¬è¥¿è·¯", "æ±‰ä¸­è·¯",
    "é™•è¥¿å—è·¯", "å˜‰å–„è·¯",
    "å¤§æœ¨æ¡¥è·¯", "é¾™åŽä¸­è·¯", "é¾™åŽ", "ä¸Šæµ·ä½“è‚²é¦†", "æ¼•å®è·¯", "æ¡‚æž—å…¬å›­", "è™¹æ¼•è·¯", "ä¸œå…°è·¯", "é¡¾æˆ´è·¯", "è™¹æ¢…è·¯",
    "é”¦æ±Ÿä¹å›­", "é¡¾æˆ´è·¯", "é¾™æ¼•è·¯", "çŸ³é¾™è·¯",  # 12å·çº¿

    "é‡‘è¿è·¯", "é‡‘æ²™æ±Ÿè¥¿è·¯", "ä¸°åº„", "ç¥è¿žå±±å—è·¯", "çœŸåŒ—è·¯", "å¤§æ¸¡æ²³è·¯", "é‡‘æ²™æ±Ÿè·¯", "æ­¦å®è·¯", "é•¿å¯¿è·¯", "æ±Ÿå®è·¯",
    "æ±‰ä¸­è·¯", "è‡ªç„¶åšç‰©é¦†", "å—äº¬è¥¿è·¯", "æ·®æµ·ä¸­è·¯", "æ–°å¤©åœ°", "é©¬å½“è·¯", "ä¸–åšä¼šåšç‰©é¦†", "æˆå±±è·¯", "ä¸œæ˜Žè·¯",
    "åŽå¤è¥¿è·¯", "å‡Œå…†æ–°æ‘", "èŠ¦æ’è·¯", "æµ¦æ±Ÿé•‡",  # 13å·çº¿
    "å°æµœ", "ä¹ç§€è·¯", "ä¸´æ´®è·¯", "é«˜æž¶è·¯", "é‡‘å›­äº”è·¯", "é‡‘ç©—è·¯", "ç¥æ±Ÿè¥¿è·¯", "ä¸°èŒ‚è·¯", "é™†ç¿”è·¯", "é©¬é™†", "é™ˆç¿”å…¬è·¯",
    "ä¸Šæµ·èµ›è½¦åœº", "æ˜Œå‰ä¸œè·¯", "ä¼Šå®è·¯", "é‡‘æµ·è·¯", "æ¡‚æ¡¥è·¯", "çŽ‹æ¡¥è·¯", "æ›¹è·¯",  # 14å·çº¿
    "é¡¾æ‘å…¬å›­", "é”¦ç§‹è·¯", "ä¸°ç¿”è·¯", "å—å¤§è·¯", "ç¥å®‰è·¯", "å¤æµªè·¯", "æ­¦å¨è·¯", "ä¸Šæµ·è¥¿ç«™", "é“œå·è·¯", "æ¢…å²­åŒ—è·¯",
    "å¤§æ¸¡æ²³è·¯", "é•¿é£Žå…¬å›­", "æ€’æ±Ÿè·¯", "åŽä¸œå¸ˆå¤§", "é‡‘æ²™æ±Ÿè·¯", "æ±Ÿè‹è·¯", "é™å®‰å¯º", "æ„šå›­è·¯", "æ­¦å®šè·¯", "é•¿ä¹è·¯",
    "å¸¸ç†Ÿè·¯", "è‚‡å˜‰æµœè·¯", "å˜‰å–„è·¯", "æ‰“æµ¦æ¡¥", "é²ç­è·¯", "è¥¿è—å—è·¯", "é™†å®¶æµœè·¯", "å¤§ä¸–ç•Œ", "è±«å›­", "è€è¥¿é—¨",
    "æ–°é—¸è·¯", "é“œå·è·¯", "å¤§æ¸¡æ²³è·¯", "é‡‘æ²™æ±Ÿè·¯", "æ±Ÿè‹è·¯", "é™å®‰å¯º", "é™•è¥¿å—è·¯", "é™•è¥¿å—è·¯", "æ–°å¤©åœ°", "è±«å›­",
    "æµ·ä¼¦è·¯", "å››å·åŒ—è·¯", "å¤©æ½¼è·¯",  # 15å·çº¿
    "é¾™é˜³è·¯", "åŽå¤ä¸­è·¯", "ç½—å±±è·¯", "å·æ²™è·¯", "åŽå¤ä¸œè·¯", "é¡¾å”è·¯", "æ°‘è€€è·¯", "ç”³æ±Ÿè·¯", "ä¸¹æ¡‚è·¯", "å”é»„è·¯",
    "å‡Œç©ºè·¯", "æµ¦ä¸œæœºåœº",  # 16å·çº¿
    "è¯¸å…‰è·¯", "èŸ é¾™è·¯", "å¾ç›ˆè·¯", "å¾æ³¾ä¸œ",  # 17å·çº¿
    "èˆªå¤´", "é¹¤æ²™èˆªåŸŽ", "æ²ˆæ¢…è·¯", "ä¸‹æ²™", "æ²”åŒ—è·¯", "æƒ å—", "äººæ°‘ä¸œè·¯", "ä¸Šæµ·é‡Žç”ŸåŠ¨ç‰©å›­", "æ»´æ°´æ¹–",  # 18å·çº¿
    "è™¹æ¼•è·¯", "æ–‡äº•è·¯", "åŽæ³¾", "é¾™æ¼•è·¯", "é«˜å®‰è·¯",  # 19å·çº¿
    "é‡‘æ¡¥", "çŽ‹æ¡¥", "èˆªåŸŽ",  # 20å·çº¿
    "ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ", "å‡Œå…†æ–°æ‘", "ä¸‰æž—ä¸œ", "å‰æ»©",  # 21å·çº¿
    "å´æ³¾", "ç´«ç«¹é«˜æ–°åŒº", "æ±Ÿå·è·¯", "æ²ªé—µè·¯", "çŸ³é¾™è·¯",  # 23å·çº¿
    "é—µè¡Œå¼€å‘åŒº", "æ–‡äº•è·¯", "å‰‘å·è·¯",  # 26å·çº¿
    "å¥‰è´¤æ–°åŸŽ", "æœ›å›­è·¯", "é‡‘æµ·æ¹–", "æµ·æ¹¾",  # å¥‰è´¤çº¿
]
# AI promptä½¿ç”¨ç¤ºä¾‹ï¼šæˆ‘å¥³å‹ä½åœ¨ä¸Šæµ·å—ç«™ï¼Œæˆ‘åœ¨å¤§è¿žè·¯åœ°é“ç«™ä¸Šç­ï¼Œæˆ‘è¦æ‰¾é è¿‘åœ°é“ç«™çš„æˆ¿å­ï¼Œè¯·å¸®æˆ‘æŽ’é™¤å®Œå…¨ä¸ç›¸å¹²çš„åœ°é“çº¿è·¯

# !/bin/env python3
# -*- coding: utf-8 -*
# """
# cron: 5 9 * * * weibo_summary.py
# new Env('è±†ç“£ç§Ÿæˆ¿');
# """
from bs4 import BeautifulSoup
import requests
import sendNotify

summary_list = []

# # æŽ’é™¤é¡¹
user_black_list = [
    "æ¨æµ¦ç§Ÿæˆ¿", "äº”è§’åœºç§Ÿèµ", "äº”è§’åœºç§Ÿæˆ¿", "PiNa@ä¸Šæµ·ç›´ç§Ÿ", "äº”è§’åœºé™„è¿‘", "æ²ªä¸Šèœ—å±…å°è±†è±†",
    "ðŸƒ ðŸ‡¨ðŸ‡³", "è±†å‹280014083", "ç“œç“œä¸€å·çš„å¢¨è¿¹",
    "é»„æµ¦åŒºç§Ÿæˆ¿",
    "å¨œå¨œå°å¤­", "è‡ªç”±å¥”æ”¾", "æ±Ÿæ¹–ä¸è‰¯äºº",
    "åŽå¤ä¸œè·¯", "æ¸…é£Žç§€é›…",
    "çµæ„Ÿä¹‹åˆƒ", "ç»™ä½ ä¿©çªçª", "ç®€å•ç‚¹", "å¿§ä¼¤çš„æ—‹å¾‹", "C",
    "ä¹å¤´å¥ˆå­", "è±†å‹dda93.0249",
    "å…”ä¹ä¹", "å¿˜è®°äº†ä¸è¯¥å¿˜çš„",
    "æŽå¥½é—²ã€‚", "å°å¼ è¦å¢žè‚Œ", "è™šä¼ªçš„ä¸–ç•Œ",
    "æ£®å¥³ä¸Žé¹¿æž—", "æå­", "æ‚²ä¼¤çš„è¯—ç¯‡", "ç›¸æ€æˆæ®‡",
    "å®‰é™çš„ç­‰å¾…", "-Joker",
    "è±†å‹279607317", "è±†å‹273774333", "æ—§æ¢¦ä¹±å¿ƒ", "å¤±å® çš„çŒ«", "æ°§æ°”æŸ æª¬çº¢èŒ¶",
    "è±†å‹279607320", "è±†å‹270169870",
    "è±†å‹279607122", "ç¥ˆé¹¤", "å¯æ€œå¼.æš§æƒ…",
    "å¦‚èŠ±ç¾Žçœ·", "è±†å‹279434723", "è±†å‹279434727", "ä»Žæ‚²ä¼¤ä¸­æŠ½ç¦»", "è±†å‹1HLEH7JXr4",
    "ä¸€åˆ‡éƒ½æŒºå¥½", "Choo", "sweet", "ä¹å„¿",
    "Foo", "å…‹å…‹", "ç¨šæ°”",
]


def filter_tr(tr):
    # print("-----")
    title = tr.select('td.title')
    if not title:
        return False
    if "ç½®é¡¶" in str(title):
        return False
    user = tr.select('td:nth-child(2)')[0].find('a').get_text()
    if user in user_black_list:
        # print(f"è¿‡æ»¤ï¼šç”¨æˆ· {user} åœ¨é»‘åå•ä¸­")
        return False
    text = title[0].find('a')['title'].strip()
    href = title[0].find('a')['href']

    # æŽ’é™¤é¡¹
    blackList = [
        "å¥³ç”Ÿ", "æˆ¿æº", "å…¬ç§¯é‡‘", "å±…ä½è¯", "é’¥åŒ™", "åˆ«å¢…",
        "æ±‚ç§Ÿ", "é¢„ç®—", "æœ‰æ²¡æœ‰",
        # "é—µè¡Œ", "å¾å®¶æ±‡", "æ¼•æ²³æ³¾", "æ¼•å®", "ä¸ƒå®", "è™¹æ¡¥",
        "èŽ˜åº„",
        "é’æµ¦", "æ³—æ³¾", "å‘¨æµ¦",
        "å®å±±", "ä¸Šæµ·å¤§å­¦", "å‘¼å…°", "å½­æµ¦",
        "å˜‰å®š",
        "æµ¦ä¸œ", "é™†å®¶å˜´", "å¼ æ±Ÿ",
        "ä¸–çºªå…¬å›­", "é¾™é˜³è·¯",
        # "é™å®‰",
        "æ™®é™€",
        "åŒ—æ–°æ³¾",
        # åœ°é“
        "æ›™å»ºè·¯", "å¾¡æ¡¥", "çœŸå…‰è·¯", "å¤§åŽä¸‰è·¯",
        "æ´²æµ·è·¯", "æ°¸å¾·è·¯",
        "é‡‘è¿è·¯", "é•¿æ±Ÿå—è·¯",
        "ä¸Šæµ·é©¬æˆåŸŽ",
        "äº”å·çº¿", "5å·çº¿", "é—µè¡Œå¼€å‘åŒº",
        "6å·çº¿", "æ¸¯åŸŽè·¯", "ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ",
        "7å·çº¿", "èŠ³åŽè·¯", "ä¸Šå¤§è·¯", "äº‘å°è·¯", "æ¨æ€", "ä¸–åš", "èŠ±æœ¨",
        "å…«å·çº¿", "8å·çº¿", "è”èˆªè·¯",
        "9å·çº¿", "ä¹äº­", "æ¾æ±Ÿ", "åˆå·è·¯",
        "11å·çº¿", "èŠ±æ¡¥", "è¿ªå£«å°¼",
        "14å·çº¿", "å°æµœ", "æ›¹è·¯",
        "16å·çº¿", "é¾™é˜³è·¯", "æµ¦ä¸œæœºåœº", "é¡¾å”è·¯",
        "17å·çº¿", "è¯¸å…‰è·¯", "ä¸œæ–¹ç»¿èˆŸ",
        "18å·çº¿", "èˆªå¤´", "æ»´æ°´æ¹–",
        "19å·çº¿", "è™¹æ¼•è·¯", "é«˜å®‰è·¯",
        "20å·çº¿", "é‡‘æ¡¥", "èˆªåŸŽ",
        "21å·çº¿", "ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ", "å‰æ»©", "ä¸‰æž—",
        "23å·çº¿", "å´æ³¾", "çŸ³é¾™è·¯", "ç´«ç«¹",
        "26å·çº¿", "é—µè¡Œå¼€å‘åŒº", "å‰‘å·è·¯",
        "å¥‰è´¤", "æµ·æ¹¾",
    ]

    for keyword in blackList:
        if keyword in text:
            # print(f"è¿‡æ»¤ï¼šæ ‡é¢˜åŒ…å«å…³é”®è¯ '{keyword}' - {href}")
            return False

    time = tr.select('td.time')[0].text

    print(text + '\t\t' + time + '\t\t' + user + '\t\t' + href)
    item = {
        'user': user,
        'title': text,
        'href': href,
        'time': time,
    }
    summary_list.append(item)


def get_top_summary(start):
    # url = 'https://www.douban.com/group/wujiaochang/discussion?start='+ str(start)
    # url = 'https://www.douban.com/group/383972/discussion?start='+ str(start)
    url = 'https://www.douban.com/group/shanghaizufang/discussion?start=' + str(start)
    headers = {
        'accept': "*/*",
        'user-agent': "Mozilla/5.0 (Windows NT 10.0; Win64; x64)",
    }
    data = requests.get(url, headers=headers)
    data.encoding = 'utf-8'
    soup = BeautifulSoup(data.text, 'html.parser')
    tr_elements = soup.select('#content > div > div.article > div:nth-child(2) > table> tr')
    for tr in tr_elements:
        filter_tr(tr)
    if len(summary_list) <= 20:
        print("-----")
        get_top_summary(start + 25)


if __name__ == '__main__':
    get_top_summary(0)
    # notify_markdown()
